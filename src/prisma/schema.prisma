generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum UserType {
  admin
  user
  external
}

model User {
  id                  Int      @id @default(autoincrement())
  firstname           String?  
  lastname            String?
  email               String   @unique
  password            String?  
  usertype            UserType
  orderExportColumns String?
  lastPasUpdate     DateTime?
  active              Boolean? @default(true)
  isBlocked          Boolean  @default(false)
  blockMailSent     Boolean  @default(false)
  token               String?
  googleId           String?
  profilePicture     String?
  googleAcessToken  String?
  CreatedAt          DateTime?
  ModifiedBy         Int?
  CreatedBy          Int?
  ModifiedAt         DateTime?

  activityLogs       ActivityLog[]
  passwordHistories  PasswordHistory[] 
  @@map("user")
}


enum ActivityType {
  Store
  BlueSky
}

model ActivityLog {
  id            Int          @id @default(autoincrement())
  userId        Int?
  email         String?
  firstname     String?
  lastname      String?
  url           String?
  lastModifyOn  DateTime?
  ipAddress     String?
  type          ActivityType 
  env           String?
  user          User?    @relation(fields: [userId], references: [id])

  @@map("activity_log")
}

model PasswordHistory {
  id         Int      @id @default(autoincrement())
  password   String
  userId     Int
  createdAt  DateTime @default(now())

  user       User     @relation(fields: [userId], references: [id])

  @@map("password_history") 
}